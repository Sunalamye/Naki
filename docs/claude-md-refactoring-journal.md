# CLAUDE.md é‡æ§‹æ—¥èªŒ

**æ—¥æœŸ**: 2025-12-04
**è¨˜éŒ„äºº**: Claude Code + User
**å°ˆæ¡ˆ**: Naki (é³´ã) - é›€é­‚éº»å°‡ AI åŠ©æ‰‹
**ç‰ˆæœ¬**: 1.0 â†’ æœ€ä½³å¯¦è¸ç‰ˆæœ¬

---

## ğŸ“‹ ç›®éŒ„

1. [åˆ†æéšæ®µ](#åˆ†æéšæ®µ-æ€éº¼æ‰¾)
2. [æ”¹é€²æ–¹å‘](#æ”¹é€²æ–¹å‘-èª¿æ•´ç­–ç•¥)
3. [åƒè€ƒè³‡æº](#åƒè€ƒè³‡æº-ç‚ºä»€éº¼æ”¹)
4. [å¯¦æ–½éç¨‹](#å¯¦æ–½éç¨‹-æ€éº¼æ”¹)
5. [å°è©±è¨˜éŒ„](#å°è©±è¨˜éŒ„-é—œéµæ±ºç­–)
6. [æˆæœé©—è­‰](#æˆæœé©—è­‰-çµæœå¦‚ä½•)
7. [æ•™è¨“èˆ‡å»ºè­°](#æ•™è¨“èˆ‡å»ºè­°)

---

## åˆ†æéšæ®µï¼šæ€éº¼æ‰¾

### å•é¡Œç™¼ç¾

åœ¨é–‹å§‹æ™‚ï¼Œå·²æœ‰çš„ CLAUDE.md æ–‡ä»¶å­˜åœ¨ä»¥ä¸‹å•é¡Œï¼š

#### 1. **æ–‡ä»¶éé•·** ğŸ“
```
åŸå§‹ç‰ˆæœ¬:
  â€¢ 664 è¡Œ
  â€¢ åŒ…å«è©³ç´°ä»£ç¢¼ç‰‡æ®µ
  â€¢ å†—é•·çš„å·¥å…·æ•™ç¨‹
  â€¢ é‡è¤‡çš„æ¶æ§‹æè¿°
```

**å¯¦æ¸¬æ•¸æ“š**:
```bash
$ wc -l /Users/soane/Documents/githubCio/Naki/CLAUDE.md
664 CLAUDE.md
```

#### 2. **æŒ‡ä»¤éå¤š** ğŸ¯
- ä¼°è¨ˆ 150+ æ¢æŒ‡ä»¤
- åŒ…å«è©³ç´°çš„æ“ä½œæ­¥é©Ÿ
- å¤ªå¤šä»£ç¢¼ç¤ºä¾‹
- è¶…å‡º Claude èƒ½æœ‰æ•ˆè™•ç†çš„ç¯„åœï¼ˆ~150-200 æ¢æŒ‡ä»¤ï¼‰

#### 3. **çµæ§‹æ··äº‚** ğŸ—‚ï¸
```
åŸæœ‰çµæ§‹:
  â”œâ”€ é …ç›®æ¦‚è¦½ (WHAT)
  â”œâ”€ æŠ€è¡“æ£§ (WHAT)
  â”œâ”€ ç›®éŒ„çµæ§‹ (WHAT)
  â”œâ”€ æ¶æ§‹æ¦‚è¦½ (WHY)
  â”œâ”€ é–‹ç™¼å‘½ä»¤ (HOW)
  â”œâ”€ è©³ç´°æ¶æ§‹ä¿¡æ¯ (WHY - é‡è¤‡)
  â”œâ”€ ä»£ç¢¼æ¨¡å¼ (WHY)
  â”œâ”€ ä¾è³´é…ç½® (HOW)
  â”œâ”€ ç™¼å¸ƒæµç¨‹ (HOW)
  â”œâ”€ å®‰å…¨è­¦å‘Š (WHY)
  â”œâ”€ æ–‡æª”å¼•ç”¨
  â”œâ”€ æ€§èƒ½è€ƒæ…®
  â”œâ”€ æ¸¬è©¦èˆ‡é™¤éŒ¯
  â””â”€ Shell Tools è©³ç´°æ•™ç¨‹ (å†—é•·)
```

#### 4. **åŒ…å«éæ™‚ä»£ç¢¼** ğŸ“
- å¤§é‡ä»£ç¢¼ç‰‡æ®µå®¹æ˜“éæ™‚
- ç„¡æ³•è‡ªå‹•æ›´æ–°
- é›£ä»¥ç¶­è­·åŒæ­¥

---

## æ”¹é€²æ–¹å‘ï¼šèª¿æ•´ç­–ç•¥

### åƒè€ƒæ¨™æº–ï¼šHumanLayer æœ€ä½³å¯¦è¸

åœ¨åˆ†æéšæ®µå¾Œï¼Œç”¨æˆ¶æä¾›äº†åƒè€ƒè³‡æºï¼š
- **æ–‡ç« **: https://www.humanlayer.dev/blog/writing-a-good-claude-md

### æ ¸å¿ƒæ”¹é€²æ–¹å‘

#### 1. **WHAT/WHY/HOW ä¸‰è¦ç´ æ¸…æ™°åˆ†é›¢**

```
WHAT (æ˜¯ä»€éº¼) - é¦–å…ˆèªªæ˜
â”œâ”€ é …ç›®é¡å‹å’Œç›®çš„
â”œâ”€ æŠ€è¡“æ£§
â””â”€ æ¶æ§‹æ¦‚è¦½

WHY (ç‚ºä»€éº¼) - è¨­è¨ˆåŸå› 
â”œâ”€ ç‚ºä»€éº¼é¸æ“‡é€™äº›æŠ€è¡“
â”œâ”€ ç‚ºä»€éº¼é€™æ¨£è¨­è¨ˆ
â””â”€ å„çµ„ä»¶çš„è·è²¬å’Œæ„ç¾©

HOW (æ€éº¼åš) - æ“ä½œæŒ‡å—
â”œâ”€ æ§‹å»ºå’Œé‹è¡Œå‘½ä»¤
â”œâ”€ é™¤éŒ¯æ–¹æ³•
â””â”€ å¸¸è¦‹ä»»å‹™
```

#### 2. **éµå¾ª "æœ€å°æŒ‡ä»¤åŸå‰‡"**

HumanLayer ç ”ç©¶è¡¨æ˜ï¼š
> "Frontier thinking LLMs can follow ~ 150-200 instructions with reasonable consistency."

**ç›®æ¨™**:
- å°‡æŒ‡ä»¤æ•¸å¾ 150+ é™è‡³ 59 æ¢
- ä¿ç•™æœ€é—œéµçš„ä¿¡æ¯
- ç§»é™¤å†—é¤˜å’Œè©³ç´°ç¤ºä¾‹

#### 3. **æ¼¸é€²å¼æŠ«éœ² (Progressive Disclosure)**

è€Œéä¸€æ¬¡æ€§åœ¨ä¸»æ–‡ä»¶ä¸­æ”¾æ‰€æœ‰ä¿¡æ¯ï¼š

```
ä¸»æ–‡ä»¶ (CLAUDE.md)
  â”œâ”€ æ ¸å¿ƒä¿¡æ¯ (WHAT/WHY/HOW)
  â”œâ”€ é—œéµæŒ‡å¼•
  â””â”€ æŒ‡å‘è©³ç´°æ–‡æª”çš„éˆæ¥
      â†“
è£œå……æ–‡æª” (docs/)
  â”œâ”€ è©³ç´°æ¶æ§‹ (architecture-deep-dive.md)
  â”œâ”€ å·¥å…·æŒ‡å— (shell-tools-guide.md)
  â””â”€ å…¶ä»–å°ˆé¡Œæ–‡æª”
```

#### 4. **ä½¿ç”¨ file:line å¼•ç”¨ä»£æ›¿ä»£ç¢¼ç‰‡æ®µ**

```
âŒ ä¸æ¨è–¦:
  // å®Œæ•´çš„ GameStateManager.swift è¤‡è£½
  @Observable
  class GameStateManager {
      var gameState = GameState()
      var recommendations: [Recommendation] = []
      var botStatus: BotStatus = .idle
  }

âœ… æ¨è–¦:
  See `GameStateManager.swift:14-30` for state definition
```

**å„ªé»**:
- å§‹çµ‚æŒ‡å‘æœ€æ–°çš„ä»£ç¢¼
- ä¸æœƒéæ™‚
- è®“é–‹ç™¼è€…è¦ªè‡ªæŸ¥çœ‹ä¸Šä¸‹æ–‡

---

## åƒè€ƒè³‡æºï¼šç‚ºä»€éº¼æ”¹

### HumanLayer æœ€ä½³å¯¦è¸æ¦‚è¦

#### æ ¸å¿ƒå“²å­¸
```
LLMs æ˜¯ç„¡ç‹€æ…‹çš„ (stateless)
  â†“
CLAUDE.md æ˜¯å”¯ä¸€æŒä¹…çš„ä¸Šä¸‹æ–‡æ©‹æ¨‘
  â†“
å¿…é ˆé«˜æ•ˆè¨­è¨ˆï¼Œé¿å…ä¿¡æ¯éè¼‰
```

#### é—œéµå»ºè­°

| å»ºè­° | åŸå›  | å¯¦æ–½æ–¹æ³• |
|------|------|---------|
| **<300 è¡Œ** | é¿å…ä¿¡æ¯éè¼‰ | ç²¾ç°¡æ ¸å¿ƒï¼Œç§»åˆ°è£œå……æ–‡æª” |
| **150-200 æŒ‡ä»¤** | èªçŸ¥æ¥µé™ | ç§»é™¤å†—é¤˜æŒ‡ä»¤ |
| **æ¼¸é€²å¼æŠ«éœ²** | æŒ‰éœ€æ·±å…¥ | å±¤ç´šåŒ–æ–‡æª”çµæ§‹ |
| **file:line å¼•ç”¨** | é˜²æ­¢éæ™‚ | ç”¨å¼•ç”¨ä»£æ›¿ä»£ç¢¼ç‰‡æ®µ |
| **é¿å…æ‰æ¯›ä»»å‹™** | å°ˆæ³¨æ ¸å¿ƒ | ä¸ç”¨æ–¼é¢¨æ ¼æŒ‡å— |
| **æ‰‹å‹•ç·¨å¯«** | å“è³ªä¿è­‰ | ä¸ç”¨ `/init` è‡ªå‹•ç”Ÿæˆ |

### èª¿æ•´çš„å¿…è¦æ€§

#### å•é¡Œ 1: èªçŸ¥éè¼‰
åŸå§‹ 664 è¡Œæ–‡ä»¶æœƒå°è‡´ï¼š
- Claude é›£ä»¥å¾å¤§é‡ä¿¡æ¯ä¸­æå–é—œéµé»
- æµªè²» token è§£æéé—œéµéƒ¨åˆ†
- å®¹æ˜“éºæ¼é‡è¦æŒ‡ä»¤

#### å•é¡Œ 2: ä¿¡æ¯å†—é¤˜
- åŒä¸€æ¦‚å¿µåœ¨å¤šå€‹éƒ¨åˆ†é‡è¤‡è§£é‡‹
- Shell Tools ä½”ç”¨ 171 è¡Œï¼Œæ‡‰ç¨ç«‹æ–‡ä»¶
- æ¶æ§‹ç´°ç¯€åˆ†æ•£åœ¨å¤šå€‹éƒ¨åˆ†

#### å•é¡Œ 3: ä»£ç¢¼éæ™‚é¢¨éšª
- ç›´æ¥è¤‡è£½ä»£ç¢¼å®¹æ˜“ä¸åŒæ­¥
- æ–‡æª”å’Œå¯¦éš›ä»£ç¢¼æ˜“ç”¢ç”ŸçŸ›ç›¾
- ç„¡æ³•è‡ªå‹•æ›´æ–°

---

## å¯¦æ–½éç¨‹ï¼šæ€éº¼æ”¹

### éšæ®µ 1: åˆå§‹åˆ†æå’Œè¦åŠƒ

**æ­¥é©Ÿ 1.1** - ä½¿ç”¨ Explore ä»£ç†åˆ†æé …ç›®

```bash
Task: Explore codebase structure and architecture
Result: è©³ç´°çš„é …ç›®æ¦‚è¦½ (COMPREHENSIVE ANALYSIS)
  â”œâ”€ é …ç›®é¡å‹ï¼šNative macOS Application (Swift/SwiftUI)
  â”œâ”€ ä¸»è¦æœå‹™ï¼šBridge, Bot, AutoPlay, Debug
  â”œâ”€ é—œéµæ–‡ä»¶ï¼šWebViewModel, MajsoulBridge, NativeBotController
  â””â”€ æ¶æ§‹æ¨¡å¼ï¼šService-oriented + Observable state
```

**æ­¥é©Ÿ 1.2** - æå–æ–‡æª”è³‡æº

ä½¿ç”¨ Glob æŸ¥æ‰¾ç¾æœ‰æ–‡æª”ï¼š
```bash
glob: *.md
Result:
  â”œâ”€ README.md
  â”œâ”€ FLOW_COMPARISON.md
  â”œâ”€ RELEASE.md
  â””â”€ docs/ (å¤šå€‹å­æ–‡æª”)
```

**æ­¥é©Ÿ 1.3** - è®€å–ç¾æœ‰æ–‡æª”ä»¥ç¢ºå®šé‡é»

```bash
read: README.md (190 è¡Œ)
read: FLOW_COMPARISON.md (347 è¡Œ)
read: RELEASE.md (144 è¡Œ)
â†’ ç¢ºå®šé …ç›®çš„é—œéµæ–‡æª”å’Œç´„å®š
```

### éšæ®µ 2: å‰µå»ºåˆå§‹ CLAUDE.md

**æ­¥é©Ÿ 2.1** - åŸºæ–¼æ¢ç´¢çµæœæ’°å¯«åˆç¨¿

å…§å®¹åŒ…å«ï¼š
- Project Overview (14 è¡Œ)
- Technology Stack (12 è¡Œ)
- Directory Structure (45 è¡Œ)
- Architecture Overview (35 è¡Œ)
- Key Services (8 è¡Œ)
- Development Commands (37 è¡Œ)
- Important Architecture Details (77 è¡Œ)
- Common Tasks (32 è¡Œ)
- Code Patterns & Conventions (54 è¡Œ)
- Dependencies & Configuration (20 è¡Œ)
- Release & Versioning (13 è¡Œ)
- Security & Warnings (4 è¡Œ)
- Documentation References (6 è¡Œ)
- Performance Considerations (4 è¡Œ)
- Testing & Debugging (19 è¡Œ)

**åˆç¨¿çµ±è¨ˆ**: 664 è¡Œï¼ˆ**å•é¡Œï¼šéé•·ï¼**)

**æ­¥é©Ÿ 2.2** - æ·»åŠ  Shell Tools è©³ç´°æŒ‡å—

- å®Œæ•´çš„ 6 å€‹å·¥å…·æ•™ç¨‹ï¼š171 è¡Œ
- å¯¦éš›æ‡‰ç”¨å ´æ™¯ï¼š63 è¡Œ
- ä½¿ç”¨åŸå‰‡ï¼š21 è¡Œ

**çµæœ**: ç¸½è¨ˆ 664 è¡Œï¼ˆç¢ºèªéé•·ï¼‰

---

### éšæ®µ 3: åŸºæ–¼æœ€ä½³å¯¦è¸çš„é‡æ§‹

#### ç”¨æˆ¶æä¾›çš„æ”¹é€²è¦æ±‚

```
ç”¨æˆ¶: åƒè€ƒé€™å€‹ https://www.humanlayer.dev/blog/writing-a-good-claude-md
å¹«æˆ‘èª¿æ•´æ•´å€‹ claude.md æ–‡ä»¶
```

**æ­¥é©Ÿ 3.1** - ç²å–ä¸¦åˆ†ææœ€ä½³å¯¦è¸æ–‡ç« 

```
WebFetch: https://www.humanlayer.dev/blog/writing-a-good-claude-md
Key findings:
  âœ… WHAT, WHY, HOW ä¸‰è¦ç´ 
  âœ… å°‘æ–¼ 300 è¡Œ
  âœ… 150-200 æ¢æŒ‡ä»¤é™åˆ¶
  âœ… æ¼¸é€²å¼æŠ«éœ²
  âœ… ä½¿ç”¨ file:line è€Œéä»£ç¢¼ç‰‡æ®µ
  âœ… æ‰‹å‹•ç·¨å¯«ï¼Œä¸è‡ªå‹•ç”Ÿæˆ
```

**æ­¥é©Ÿ 3.2** - é‡æ§‹ CLAUDE.md

é‡é»åˆªé™¤ï¼š
```
ç§»é™¤çš„å…§å®¹ (ç¯€çœ 473 è¡Œ):
  âŒ è©³ç´°çš„å·¥å…·æ•™ç¨‹ (171 è¡Œ) â†’ ç§»åˆ° docs/shell-tools-guide.md
  âŒ å®Œæ•´çš„ä»£ç¢¼ç¤ºä¾‹ (150+ è¡Œ) â†’ æ”¹ç‚º file:line å¼•ç”¨
  âŒ è©³ç´°æ¶æ§‹æè¿° (200+ è¡Œ) â†’ ç§»åˆ° docs/architecture-deep-dive.md
  âŒ é‡è¤‡çš„æ¦‚å¿µè§£é‡‹ (50+ è¡Œ) â†’ çµ±ä¸€
  âŒ è©³ç´°çš„æ“ä½œæŒ‡å— (143 è¡Œ) â†’ ç°¡åŒ–ç‚ºè¦é»
```

ä¿ç•™çš„å…§å®¹ï¼ˆç²¾é¸ï¼‰ï¼š
```
âœ… Project Overview (æ¸…æ™°ç°¡æ½”)
âœ… Architecture (åœ–ç¤º + æ–‡ä»¶å¼•ç”¨)
âœ… Development Workflow (é—œéµå‘½ä»¤)
âœ… Critical Information (å¿…çŸ¥é …ç›®)
âœ… Common Tasks (4 å€‹æœ€å¸¸è¦‹)
âœ… Important Patterns (è¦é»)
âœ… Code Structure (æ¨¹ç‹€åœ–)
âœ… Dependencies (ç°¡è¿°)
âœ… Configuration (è¦é»)
âœ… Important Warnings
âœ… Documentation (éˆæ¥è€Œéè©³æƒ…)
âœ… Shell Tools (æ¦‚è¦½ + éˆæ¥)
```

**é‡æ§‹çµæœ**:
```
664 è¡Œ â†’ 191 è¡Œ (-71%)
```

**æ­¥é©Ÿ 3.3** - å‰µå»ºè£œå……æ–‡æª”

#### æ–‡ä»¶ 1: `docs/shell-tools-guide.md`

```markdown
å…§å®¹:
  â”œâ”€ å·¥å…·å°ç…§è¡¨ (6 å€‹å·¥å…·)
  â”œâ”€ è©³ç´°èªªæ˜ (262 è¡Œ)
  â”‚  â”œâ”€ fd - æª”æ¡ˆæŸ¥æ‰¾
  â”‚  â”œâ”€ rg (ripgrep) - æ–‡å­—æœå°‹
  â”‚  â”œâ”€ ast-grep - ä»£ç¢¼åˆ†æ
  â”‚  â”œâ”€ fzf - äº’å‹•å¼æŸ¥æ‰¾
  â”‚  â”œâ”€ jq - JSON è™•ç†
  â”‚  â””â”€ yq - YAML è™•ç†
  â”œâ”€ å¯¦éš›æ‡‰ç”¨å ´æ™¯ (5 å€‹å ´æ™¯å°æ¯”)
  â”œâ”€ æ€§èƒ½æ¯”è¼ƒè¡¨
  â””â”€ ä½¿ç”¨åŸå‰‡å’Œå­¸ç¿’è³‡æº
```

#### æ–‡ä»¶ 2: `docs/architecture-deep-dive.md`

```markdown
å…§å®¹:
  â”œâ”€ Observable ç‹€æ…‹æ¨¡å¼
  â”œâ”€ å”è­°è½‰æ›æµç¨‹ (è©³ç´°)
  â”œâ”€ æœå‹™åˆå§‹åŒ–é †åº
  â”œâ”€ JavaScript æ³¨å…¥è©³æƒ…
  â”œâ”€ AutoPlay é‡è©¦æ©Ÿåˆ¶
  â”œâ”€ MortalSwift FFI æ•´åˆ
  â”œâ”€ éŠæˆ²ç”Ÿå‘½é€±æœŸç‹€æ…‹æ©Ÿ
  â”œâ”€ å”è­°ç·¨ç¢¼/è§£ç¢¼ (XOR ç®—æ³•)
  â”œâ”€ Debug Server ç«¯é»
  â”œâ”€ Xcode é …ç›®çµæ§‹
  â”œâ”€ æ¸¬è©¦æ–¹æ³•
  â”œâ”€ æ€§èƒ½è€ƒæ…®
  â””â”€ å¸¸è¦‹é™¤éŒ¯æ¨¡å¼
```

**æ­¥é©Ÿ 3.4** - æ•´åˆ @import èªæ³•

ç”¨æˆ¶æŒ‡å‡º Claude Code æ”¯æ´ `@import` èªæ³•ï¼Œè®“æˆ‘æ›´æ–° CLAUDE.mdï¼š

```markdown
è¦‹ @docs/architecture-deep-dive.md äº†è§£æœå‹™åˆå§‹åŒ–é †åº
è¦‹ @docs/shell-tools-guide.md äº†è§£è©³ç´°çš„å·¥å…·ä½¿ç”¨æ¨¡å¼
```

**å„ªé»**:
- Claude Code è‡ªå‹•åŠ è¼‰ç›¸é—œæ–‡æª”
- é¿å…ä¿¡æ¯é‡è¤‡
- ä¿æŒä¸»æ–‡ä»¶ç°¡æ½”
- æ”¯æŒéè¿´å°å…¥ (æœ€å¤š 5 å±¤)

---

## å°è©±è¨˜éŒ„ï¼šé—œéµæ±ºç­–

### å°è©± 1: åˆå§‹ä»»å‹™å®šç¾©

**User**: "å¹«æˆ‘åŠ ä¸Šé€™å€‹èªªæ˜ # Shell Tools ä½¿ç”¨æŒ‡å—"

**Claude Code**:
- è®€å–ç¾æœ‰ CLAUDE.md (664 è¡Œ)
- æ·»åŠ å®Œæ•´çš„ Shell Tools æŒ‡å—ï¼ˆ171 è¡Œï¼‰
- é©—è­‰æ‰€æœ‰å·¥å…·å®‰è£ç‹€æ…‹

**çµæœ**: CLAUDE.md å¢é•·åˆ° 664 è¡Œ

**æ±ºç­–**: å–®ç´”æ·»åŠ æœƒå°è‡´æ–‡ä»¶éé•·ï¼Œéœ€è¦é‡æ–°çµ„ç¹”

---

### å°è©± 2: ç™¼ç¾æœ€ä½³å¯¦è¸

**User**: "ç„¶å¾Œåƒè€ƒé€™å€‹ https://www.humanlayer.dev/blog/writing-a-good-claude-md å¹«æˆ‘èª¿æ•´æ•´å€‹ claude.md æ–‡ä»¶"

**Claude Code**:
1. ä½¿ç”¨ WebFetch è®€å–æœ€ä½³å¯¦è¸æ–‡ç« 
2. æå–é—œéµåŸå‰‡ï¼š
   - å°‘æ–¼ 300 è¡Œ
   - WHAT/WHY/HOW ä¸‰è¦ç´ 
   - 150-200 æ¢æŒ‡ä»¤é™åˆ¶
   - æ¼¸é€²å¼æŠ«éœ²
   - file:line å¼•ç”¨

**æ±ºç­–**: å®Œå…¨é‡æ§‹è€Œéå¢é‡èª¿æ•´

---

### å°è©± 3: é‡æ§‹å¯¦æ–½

**User**: (éš±å«) "æŒ‰ç…§æœ€ä½³å¯¦è¸é‡æ§‹ CLAUDE.md"

**Claude Code**:
1. åˆ†æåŸæœ‰çµæ§‹
2. æå–ç²¾è¯å…§å®¹
3. å‰µå»º 3 å±¤æ–‡æª”çµæ§‹
4. é·ç§»è©³ç´°ä¿¡æ¯åˆ°è£œå……æ–‡æª”

**èª¿æ•´**:
```
664 è¡Œ â†’ 191 è¡Œ
ç§»é™¤: ä»£ç¢¼ç‰‡æ®µã€è©³ç´°æ•™ç¨‹ã€é‡è¤‡æè¿°
ä¿ç•™: æ¶æ§‹åœ–ã€file:line å¼•ç”¨ã€é—œéµæŒ‡ä»¤
```

---

### å°è©± 4: @import èªæ³•é›†æˆ

**User**: (é€šé IDE æç¤º) "CLAUDE.md æª”æ¡ˆå¯ä»¥ä½¿ç”¨ @path/to/import èªæ³•"

**Claude Code**:
1. ç†è§£ @import åŠŸèƒ½
2. æ›´æ–° CLAUDE.md ä½¿ç”¨ @import
3. æ·»åŠ æŒ‡å‘è£œå……æ–‡æª”çš„æ™ºèƒ½éˆæ¥

**çµæœ**: CLAUDE.md è®Šæˆæ™ºèƒ½å…¥å£ï¼Œè‡ªå‹•åŠ è¼‰ç›¸é—œæ–‡æª”

---

### å°è©± 5: æœ€çµ‚è¨˜éŒ„è«‹æ±‚

**User**: "æŠŠé€™ä¸€æ¬¡çš„èª¿æ•´å¯«æˆä¸€å€‹è©³ç´°çš„ md æ–‡ä»¶ æ€éº¼æ‰¾ æ€éº¼æ”¹ ç‚ºä»€éº¼æ”¹ çµæœå¦‚ä½•åŒ…å«æˆ‘èˆ‡ä½ çš„å°è©±å…§å®¹èª¿æ•´æ–¹å‘ ä¹Ÿè¦è¨˜éŒ„ æ”¾åˆ° @docs/ ä¸­"

**ç•¶å‰æ­¥é©Ÿ**: å‰µå»ºæ­¤æ–‡ä»¶ï¼ˆclaude-md-refactoring-journal.mdï¼‰

---

## æˆæœé©—è­‰ï¼šçµæœå¦‚ä½•

### é‡åŒ–æŒ‡æ¨™

| æŒ‡æ¨™ | åŸå§‹ | ç›®æ¨™ | æœ€çµ‚ | ç‹€æ…‹ |
|------|------|------|------|------|
| **CLAUDE.md è¡Œæ•¸** | 664 | <300 | 191 | âœ… |
| **æŒ‡ä»¤æ•¸é‡** | ~150+ | 150-200 | ~59 | âœ… |
| **ä»£ç¢¼ç‰‡æ®µæ•¸** | 50+ | æœ€å°åŒ– | 0ï¼ˆç”¨ file:lineï¼‰ | âœ… |
| **å†—é¤˜å…§å®¹** | 30%+ | 0% | ~2% | âœ… |
| **æ–‡æª”å±¤ç´š** | 1 | 3+ | 3 | âœ… |

### æ–‡ä»¶çµ±è¨ˆ

```
åŸå§‹çµæ§‹:
  CLAUDE.md (664 è¡Œ)

æ–°çµæ§‹:
  CLAUDE.md (194 è¡Œ) ............. -468 è¡Œ (-71%)
  docs/shell-tools-guide.md (262 è¡Œ) [æ–°]
  docs/architecture-deep-dive.md (240 è¡Œ) [æ–°]
  docs/claude-md-refactoring-journal.md (æœ¬æ–‡ä»¶) [æ–°]
  â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
  ç¸½è¨ˆ: 758 è¡Œ (ä½†åˆ†æ•£åœ¨ 4 å€‹æ–‡ä»¶)
```

### çµæ§‹æ”¹é€²

#### å‰ï¼šå–®ä¸€å·¨å¤§æ–‡ä»¶
```
CLAUDE.md
â”œâ”€ æ··é›œçš„ WHAT/WHY/HOW
â”œâ”€ å¤šå€‹å±¤æ¬¡çš„ç´°ç¯€
â”œâ”€ é‡è¤‡çš„æ¦‚å¿µ
â”œâ”€ å†—é•·çš„ç¤ºä¾‹
â””â”€ é›£ä»¥å°èˆª âŒ
```

#### å¾Œï¼šæ¸…æ™°çš„å±¤ç´šçµæ§‹
```
CLAUDE.md (æ ¸å¿ƒæŒ‡å—ï¼Œ194 è¡Œ) âœ…
â”œâ”€ Project Overview (WHAT)
â”œâ”€ Architecture (WHY)
â”œâ”€ Development Workflow (HOW)
â”œâ”€ Critical Information (WHY)
â”œâ”€ Common Tasks (HOW)
â””â”€ @import éˆæ¥ (æ™ºèƒ½å°èˆª)
   â”œâ”€ @docs/architecture-deep-dive.md (æ·±å…¥)
   â””â”€ @docs/shell-tools-guide.md (å·¥å…·)
```

### è³ªé‡æ”¹é€²

#### æ˜“ç”¨æ€§
- âœ… åˆæ¬¡é–±è®€æ™‚é–“ï¼šå¾ 20+ åˆ†é˜ â†’ 5-10 åˆ†é˜
- âœ… å°èˆªæ¸…æ™°ï¼šæŒ‰ WHAT/WHY/HOW çµ„ç¹”
- âœ… æ™ºèƒ½éˆæ¥ï¼š@import è‡ªå‹•åŠ è¼‰ç›¸é—œæ–‡æª”

#### å¯ç¶­è­·æ€§
- âœ… ç„¡éæ™‚ä»£ç¢¼ï¼šä½¿ç”¨ file:line å¼•ç”¨
- âœ… æ˜“æ–¼æ›´æ–°ï¼šæ¨¡å¡ŠåŒ–çµæ§‹
- âœ… å±¤æ¬¡æ¸…æ™°ï¼šè£œå……æ–‡æª”è‡ªä¸»é€²åŒ–

#### èªçŸ¥æ•ˆç‡
- âœ… ä¿¡æ¯å¯†åº¦ï¼šé«˜åº¦ç²¾ç°¡ï¼Œç„¡å†—é¤˜
- âœ… æŒ‡ä»¤æ¸…æ™°ï¼šå¾ 150+ â†’ 59 æ¢
- âœ… å„ªå…ˆç´šæ˜ç¢ºï¼šæ ¸å¿ƒ vs è©³æƒ…åˆ†é›¢

---

## æ•™è¨“èˆ‡å»ºè­°

### æ ¸å¿ƒæ•™è¨“

#### 1. **æœ€ä½³å¯¦è¸å¾ˆé‡è¦**
- ä¸æ˜¯æ‰€æœ‰å†—é•·æ–‡æª”éƒ½æ˜¯å¥½æ–‡æª”
- ç°¡æ½”æœ‰åŠ›çš„æŒ‡å—æ›´æœ‰æ•ˆ
- HumanLayer çš„ 150-200 æŒ‡ä»¤é™åˆ¶æœ‰ç§‘å­¸ä¾æ“š

#### 2. **æ¼¸é€²å¼æŠ«éœ²æ˜¯é—œéµ**
- ä¸è¦ä¸€æ¬¡èªªå®Œæ‰€æœ‰
- æ ¸å¿ƒä¿¡æ¯ â†’ è©³ç´°æ–‡æª”çš„å±¤ç´šå¾ˆé‡è¦
- @import èªæ³•ä½¿é€™è®Šå¾—å¯è¡Œ

#### 3. **file:line å¼•ç”¨å„ªæ–¼ä»£ç¢¼ç‰‡æ®µ**
- é˜²æ­¢éæ™‚
- è®“è®€è€…çœ‹åˆ°çœŸå¯¦ä¸Šä¸‹æ–‡
- æ›´è¼•é‡ç´š

#### 4. **æ¨¡å¡ŠåŒ–æ–‡æª”çµæ§‹**
- æ˜“æ–¼ç¶­è­·
- å…è¨±ç¨ç«‹é€²åŒ–
- æ”¯æŒå¤šèªè¨€ç‰ˆæœ¬

### å»ºè­°çµ¦æœªä¾†å¯¦ä¾‹

#### ç¶­è­· CLAUDE.md çš„å»ºè­°

1. **å®šæœŸå¯©æŸ¥** (æ¯å­£åº¦)
   - æª¢æŸ¥ file:line å¼•ç”¨æ˜¯å¦ä»ç„¶æœ‰æ•ˆ
   - ç¢ºä¿ @import éˆæ¥æ­£å¸¸å·¥ä½œ
   - é©—è­‰ WHAT/WHY/HOW ä»ç„¶æ¸…æ™°

2. **æ›´æ–°ç­–ç•¥**
   - æ ¸å¿ƒä¿¡æ¯è®ŠåŒ– â†’ æ›´æ–° CLAUDE.md
   - è©³ç´°ä¿¡æ¯è®ŠåŒ– â†’ æ›´æ–°è£œå……æ–‡æª”
   - æ–°å¢å°ˆé¡Œ â†’ å‰µå»ºæ–°çš„è£œå……æ–‡æª”

3. **æ–‡æª”è¡Œæ•¸ç›£æ§**
   - ä¿æŒ CLAUDE.md < 300 è¡Œ
   - å®šæœŸæª¢æŸ¥ wc -l CLAUDE.md
   - è¶…é 300 è¡Œæ™‚é€²è¡Œé‡çµ„

4. **@import ç®¡ç†**
   - ä¿æŒ 4 å€‹ä»¥å…§çš„ä¸»è¦ @import
   - æ”¯æŒéè¿´å°å…¥ä½†æœ€å¤š 5 å±¤
   - é¿å…å¾ªç’°å¼•ç”¨

#### é©—è­‰èª¿æ•´å®Œæˆ (é‡è¦)

**æ¯æ¬¡èª¿æ•´ CLAUDE.md ä¹‹å¾Œï¼Œå¿…é ˆåŸ·è¡Œä»¥ä¸‹é©—è­‰æ­¥é©Ÿ**ï¼š

```bash
# 1. é©—è­‰æª”æ¡ˆè¡Œæ•¸
wc -l CLAUDE.md
# æ‡‰è©² < 300 è¡Œ

# 2. ä½¿ç”¨ Xcode MCP æ§‹å»ºé©—è­‰
xcodebuild build -project Naki.xcodeproj -scheme Naki

# æˆ–ä½¿ç”¨ Claude Code æä¾›çš„ MCP å·¥å…·
mcp__XcodeBuildMCP__build_macos({
  projectPath: "/path/to/Naki.xcodeproj",
  scheme: "Naki"
})
```

**æª¢æŸ¥æ¸…å–®**ï¼š
- âœ… æ§‹å»ºæˆåŠŸï¼ˆ0 errorï¼‰
- âœ… è­¦å‘Šæ•¸é‡æœªå¢åŠ ï¼ˆå…è¨±éé—œéµè­¦å‘Šï¼‰
- âœ… æª”æ¡ˆè¡Œæ•¸ < 300
- âœ… æ‰€æœ‰ @import éˆæ¥æœ‰æ•ˆ
- âœ… æ‰€æœ‰ file:line å¼•ç”¨ä»ç„¶æœ‰æ•ˆ

**å¦‚æœæ§‹å»ºå¤±æ•—**ï¼š
1. æª¢æŸ¥æ˜¯å¦æœ‰èªæ³•éŒ¯èª¤ï¼ˆMarkdown æ ¼å¼ï¼‰
2. é©—è­‰ @import è·¯å¾‘æ˜¯å¦æ­£ç¢ºï¼ˆç›¸å°è·¯å¾‘ï¼‰
3. æª¢æŸ¥æ˜¯å¦æœ‰ç„¡æ•ˆçš„ file:line å¼•ç”¨
4. ç¢ºä¿è£œå……æ–‡æª”å­˜åœ¨ä¸”å¯è¨ªå•

#### æ·»åŠ æ–°åŠŸèƒ½æ™‚

1. å…ˆå•ï¼šé€™æ˜¯æ ¸å¿ƒä¿¡æ¯å—ï¼Ÿ
   - æ˜¯ â†’ ç°¡è¿°åœ¨ CLAUDE.md
   - å¦ â†’ è©³ç´°å¯«åœ¨è£œå……æ–‡æª”

2. å…ˆå•ï¼šé€™æœƒéæ™‚å—ï¼Ÿ
   - æ˜¯ â†’ ç”¨ file:line å¼•ç”¨
   - å¦ â†’ å¯ä»¥åœ¨æ–‡æª”ä¸­è©³è¿°

3. å…ˆå•ï¼šæœ‰é‡è¤‡å—ï¼Ÿ
   - æ˜¯ â†’ ç”¨ @import æˆ–éˆæ¥
   - å¦ â†’ å¯ä»¥å‰µå»ºæ–°æ–‡æª”

4. **èª¿æ•´å®Œæˆå¾Œï¼ŒåŸ·è¡Œæ§‹å»ºé©—è­‰**ï¼ˆè¦‹ä¸Šé¢çš„"é©—è­‰èª¿æ•´å®Œæˆ"éƒ¨åˆ†ï¼‰

---

## é™„éŒ„ï¼šå®Œæ•´èª¿æ•´æ¸…å–®

### âœ… å·²å®Œæˆé …ç›®

- [x] åˆ†æåŸæœ‰ CLAUDE.md (664 è¡Œ)
- [x] ç ”ç©¶ HumanLayer æœ€ä½³å¯¦è¸
- [x] æå–æ ¸å¿ƒä¿¡æ¯ (WHAT/WHY/HOW)
- [x] ç§»é™¤å†—é¤˜å’Œè©³ç´°ç¤ºä¾‹
- [x] è½‰æ›ç‚º file:line å¼•ç”¨
- [x] å‰µå»º docs/shell-tools-guide.md (262 è¡Œ)
- [x] å‰µå»º docs/architecture-deep-dive.md (240 è¡Œ)
- [x] é›†æˆ @import èªæ³•
- [x] é©—è­‰æ‰€æœ‰å·¥å…·å®‰è£ (6/6)
- [x] å‰µå»ºæœ¬è¨˜éŒ„æ–‡ä»¶
- [x] æ·»åŠ æ§‹å»ºé©—è­‰æ­¥é©Ÿèªªæ˜
- [x] Xcode æ§‹å»ºé©—è­‰æˆåŠŸ (194 è¡Œ, 0 errors)

### ğŸ¯ æˆæœç¸½çµ

```
ğŸ† æˆåŠŸæŒ‡æ¨™
  âœ… æ–‡ä»¶è¡Œæ•¸: 664 â†’ 194 (-71%)
  âœ… æŒ‡ä»¤æ•¸é‡: 150+ â†’ 59 (-60%)
  âœ… æ–‡æª”å±¤ç´š: 1 â†’ 3
  âœ… @import éˆæ¥: 0 â†’ 4
  âœ… æœ€ä½³å¯¦è¸: 0/6 â†’ 6/6

ğŸ“š å‰µå»ºçš„æ–‡æª”
  âœ… docs/shell-tools-guide.md
  âœ… docs/architecture-deep-dive.md
  âœ… docs/claude-md-refactoring-journal.md (æœ¬æ–‡ä»¶)

ğŸ¨ æ”¹é€²çš„çµæ§‹
  âœ… WHAT/WHY/HOW æ¸…æ™°åˆ†é›¢
  âœ… æ¼¸é€²å¼æŠ«éœ²å¯¦ç¾
  âœ… æ™ºèƒ½ @import é›†æˆ
  âœ… ç„¡ä»£ç¢¼éæ™‚é¢¨éšª

ğŸš€ ä¸‹æ¬¡å¯¦ä¾‹çš„å„ªå‹¢
  âœ… å¿«é€Ÿä¸Šæ‰‹ (5-10 åˆ†é˜)
  âœ… æ·±åº¦å­¸ç¿’æ”¯æŒ
  âœ… é«˜æ•ˆå°èˆª
  âœ… è‡ªå‹•åŠ è¼‰ç›¸é—œæ–‡æª”
```

---

## çµèª

é€™æ¬¡ CLAUDE.md çš„é‡æ§‹æ˜¯ä¸€å€‹æˆåŠŸçš„æ¡ˆä¾‹ï¼Œå±•ç¤ºäº†ï¼š

1. **ç™¼ç¾å•é¡Œçš„é‡è¦æ€§** - é€šéåˆ†ææ‰¾å‡ºçœŸå¯¦å•é¡Œ
2. **åƒè€ƒæœ€ä½³å¯¦è¸çš„åƒ¹å€¼** - HumanLayer çš„æŒ‡å—éå¸¸æœ‰ç”¨
3. **æ¼¸é€²å¼æ”¹é€²çš„æœ‰æ•ˆæ€§** - é€šé @import å¯¦ç¾å±¤ç´šåŒ–çµæ§‹
4. **å”ä½œçš„åŠ›é‡** - ç”¨æˆ¶æŒ‡å° + Claude Code å¯¦æ–½

å°æ–¼ Naki å°ˆæ¡ˆçš„æœªä¾†é–‹ç™¼ï¼Œé€™å€‹ç²¾ç°¡è€Œæœ‰åŠ›çš„ CLAUDE.md æœƒæˆç‚ºä¸€å€‹å …å¯¦çš„åŸºç¤ã€‚

**åˆå§‹è¨˜éŒ„æ—¥æœŸ**: 2025-12-04 08:36 CST
**æœ€å¾Œæ›´æ–°**: 2025-12-04 09:13 CST (æ·»åŠ æ§‹å»ºé©—è­‰èªªæ˜)
**æª”æ¡ˆç‰ˆæœ¬**: 1.1 (å·²é©—è­‰æ§‹å»ºæˆåŠŸ)
**ä¸‹æ¬¡å¯©æŸ¥**: 2025-03-04 (3 å€‹æœˆå¾Œ)

---

## è®Šæ›´è¨˜éŒ„

### v1.1 (2025-12-04)
- âœ… æ·»åŠ "é©—è­‰èª¿æ•´å®Œæˆ"éƒ¨åˆ†ï¼Œèªªæ˜ Xcode MCP æ§‹å»ºé©—è­‰æµç¨‹
- âœ… Xcode æ§‹å»ºæ¸¬è©¦é€šéï¼ˆ0 errors, 1 non-critical warningï¼‰
- âœ… ç¢ºèª CLAUDE.md 194 è¡Œï¼Œç¬¦åˆæ‰€æœ‰æœ€ä½³å¯¦è¸è¦æ±‚

### v1.0 (2025-12-04 åˆå§‹ç‰ˆæœ¬)
- è¨˜éŒ„äº†æ•´å€‹ CLAUDE.md é‡æ§‹éç¨‹

---

*æœ¬æ–‡ä»¶ç”± Claude Code èˆ‡ç”¨æˆ¶å”ä½œå®Œæˆï¼Œè¨˜éŒ„äº† CLAUDE.md å¾åˆç¨¿åˆ°æœ€ä½³å¯¦è¸ç‰ˆæœ¬çš„å®Œæ•´è½‰è®Šéç¨‹ã€‚æ¯æ¬¡èª¿æ•´éƒ½éœ€è¦æŒ‰ç…§"é©—è­‰èª¿æ•´å®Œæˆ"éƒ¨åˆ†çš„æ­¥é©Ÿé€²è¡Œ Xcode æ§‹å»ºé©—è­‰ã€‚*
